<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>My Games | Akashic Academy</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:Georgia,serif;background:#0a0a1a;color:#fff;min-height:100vh;padding-top:60px}

/* Sticky Language Toggle Bar */
.lang-bar{position:fixed;top:0;left:0;right:0;z-index:1000;background:rgba(10,10,26,0.95);backdrop-filter:blur(10px);padding:10px 20px;display:flex;justify-content:center;align-items:center;border-bottom:2px solid rgba(255,215,0,0.3)}
.lang-toggle{display:flex;gap:5px;background:rgba(0,0,0,0.4);border-radius:25px;padding:4px;border:2px solid rgba(255,215,0,0.4)}
.lang-btn{padding:8px 16px;border:none;border-radius:20px;cursor:pointer;font-weight:bold;font-size:0.85em;transition:all 0.2s;background:transparent;color:#fff}
.lang-btn.active{background:#ffd700;color:#1a1a2e}
.lang-btn:hover:not(.active){background:rgba(255,255,255,0.1)}

/* Language Switching */
.en .lang-es{display:none!important}
.es .lang-en{display:none!important}

.header{background:linear-gradient(135deg,#1a1a2e,#16213e);padding:20px;text-align:center;border-bottom:3px solid #ffd700;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}
.header h1{color:#ffd700;font-size:1.8em;flex:1;text-align:center}
.student-info{display:flex;gap:15px;align-items:center}
.student-name{background:rgba(255,215,0,0.2);padding:10px 20px;border-radius:20px;font-weight:bold}
.btn-logout{background:#e74c3c;color:#fff;border:none;padding:10px 20px;border-radius:20px;cursor:pointer;font-weight:bold;transition:all 0.2s}
.btn-logout:hover{background:#c0392b;transform:translateY(-2px)}

.main{max-width:1200px;margin:0 auto;padding:40px 20px}
.welcome{text-align:center;margin-bottom:40px}
.welcome h2{font-size:2em;color:#ffd700;margin-bottom:10px}
.welcome p{opacity:0.8;font-size:1.1em}

.games-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px}
.game-card{background:linear-gradient(135deg,rgba(255,255,255,0.1),rgba(255,255,255,0.05));border:2px solid rgba(255,255,255,0.2);border-radius:16px;padding:25px;text-align:center;transition:all 0.3s;cursor:pointer}
.game-card:hover{transform:translateY(-5px);border-color:#ffd700;box-shadow:0 10px 30px rgba(255,215,0,0.3)}
.game-icon{font-size:3em;margin-bottom:15px}
.game-name{font-size:1.3em;font-weight:bold;color:#ffd700;margin-bottom:8px}
.game-grade{font-size:0.9em;opacity:0.7;margin-bottom:8px}
.game-desc{font-size:0.95em;opacity:0.8;margin-bottom:15px;min-height:40px}
.btn-play{background:linear-gradient(135deg,#ffd700,#ff8c00);color:#1a1a2e;border:none;padding:12px 30px;border-radius:25px;font-weight:bold;font-size:1em;cursor:pointer;transition:all 0.2s;width:100%}
.btn-play:hover{transform:scale(1.05)}

.loading{text-align:center;padding:100px 20px}
.loading h2{color:#ffd700;margin-bottom:20px}
.no-access{text-align:center;padding:100px 20px}
.no-access h2{color:#e74c3c;margin-bottom:20px}
.no-access p{margin-bottom:30px;opacity:0.8}
.btn-setup{background:#ffd700;color:#1a1a2e;padding:15px 40px;border-radius:30px;text-decoration:none;font-weight:bold;display:inline-block;transition:all 0.2s}
.btn-setup:hover{transform:translateY(-3px);box-shadow:0 10px 20px rgba(255,215,0,0.3)}

@media(max-width:700px){body{padding-top:55px}.header{flex-direction:column;gap:15px}.header h1{font-size:1.5em}.student-info{flex-direction:column;width:100%}.games-grid{grid-template-columns:1fr}}
</style>
</head>
<body class="en">

<div class="lang-bar">
<div class="lang-toggle">
<button class="lang-btn active" id="btnEn" onclick="setLang('en')">üá∫üá∏ English</button>
<button class="lang-btn" id="btnEs" onclick="setLang('es')">üáµüá∑ Espa√±ol</button>
</div>
</div>

<header class="header">
<div style="flex:1"></div>
<h1><span class="lang-en">üéÆ My Games</span><span class="lang-es">üéÆ Mis Juegos</span></h1>
<div class="student-info">
<span class="student-name" id="studentName">üë§ Student</span>
<button class="btn-logout" onclick="logout()"><span class="lang-en">Logout</span><span class="lang-es">Salir</span></button>
</div>
</header>

<main class="main">

<div id="loading" class="loading">
<h2><span class="lang-en">Loading your games...</span><span class="lang-es">Cargando tus juegos...</span></h2>
<p>‚è≥</p>
</div>

<div id="mainContent" style="display:none">
<div class="welcome">
<h2><span class="lang-en">Welcome Back! üéâ</span><span class="lang-es">¬°Bienvenido de Nuevo! üéâ</span></h2>
<p><span class="lang-en">All 24 games are unlocked and ready to play! Game badges show difficulty levels - start with basics or challenge yourself with advanced games.</span><span class="lang-es">¬°Los 24 juegos est√°n desbloqueados y listos para jugar! Las insignias muestran niveles de dificultad - comienza con lo b√°sico o desaf√≠ate con juegos avanzados.</span></p>
</div>
<div id="gamesGrid" class="games-grid"></div>
</div>

<div id="noAccess" class="no-access" style="display:none">
<h2>‚ö†Ô∏è <span class="lang-en">No Access</span><span class="lang-es">Sin Acceso</span></h2>
<p><span class="lang-en">You need to join a class to play games.</span><span class="lang-es">Necesitas unirte a una clase para jugar juegos.</span></p>
<a href="student-setup.html" class="btn-setup"><span class="lang-en">Join a Class</span><span class="lang-es">Unirse a una Clase</span></a>
</div>

</main>

<script>
const API_URL='https://digital-literacy-backend.onrender.com/api';
const GAMES=[
{id:'visual-k2',name:'Visual Memory',nameEs:'Memoria Visual',icon:'üëÄ',grade:'K-2',gradeEs:'K-2',desc:'Remember squares',descEs:'Recuerda cuadrados',url:'games-k2-visual-memory'},
{id:'sequence-k2',name:'Sequence Memory',nameEs:'Memoria Secuencia',icon:'üî¢',grade:'K-2',gradeEs:'K-2',desc:'Follow pattern',descEs:'Sigue patr√≥n',url:'games-k2-sequence-memory'},
{id:'color-k2',name:'Color Match',nameEs:'Emparejar Colores',icon:'üé®',grade:'K-2',gradeEs:'K-2',desc:'Match colors',descEs:'Empareja colores',url:'games-k2-color-match'},
{id:'memory-k2',name:'Memory Match',nameEs:'Juego Memoria',icon:'üÉè',grade:'K-2',gradeEs:'K-2',desc:'Find pairs',descEs:'Encuentra pares',url:'games-k2-memory-match'},
{id:'reaction-k2',name:'Reaction Time',nameEs:'Tiempo Reacci√≥n',icon:'‚ö°',grade:'K-2',gradeEs:'K-2',desc:'Click when ready',descEs:'Clic cuando listo',url:'games-k2-reaction-time'},
{id:'reflex-k2',name:'Reflex Training',nameEs:'Entrenamiento Reflejos',icon:'üéØ',grade:'K-2',gradeEs:'K-2',desc:'Click targets',descEs:'Clic objetivos',url:'games-k2-reflex-training'},
{id:'number-35',name:'Number Memory',nameEs:'Memoria N√∫meros',icon:'üî¢',grade:'3-5',gradeEs:'3-5',desc:'Remember numbers',descEs:'Recuerda n√∫meros',url:'games-35-number-memory'},
{id:'visual-35',name:'Visual Memory',nameEs:'Memoria Visual',icon:'üëÅÔ∏è',grade:'3-5',gradeEs:'3-5',desc:'Advanced memory',descEs:'Memoria avanzada',url:'games-35-visual-memory'},
{id:'word-35',name:'Word Search',nameEs:'Sopa de Letras',icon:'üîç',grade:'3-5',gradeEs:'3-5',desc:'Find words',descEs:'Encuentra palabras',url:'games-35-word-search'},
{id:'sequence-35',name:'Sequence Memory',nameEs:'Memoria Secuencia',icon:'üî≤',grade:'3-5',gradeEs:'3-5',desc:'Advanced patterns',descEs:'Patrones avanzados',url:'games-35-sequence-memory'},
{id:'memory-35',name:'Memory Match',nameEs:'Juego Memoria',icon:'üÉè',grade:'3-5',gradeEs:'3-5',desc:'Challenging pairs',descEs:'Pares desafiantes',url:'games-35-memory-match'},
{id:'reaction-35',name:'Reaction Time',nameEs:'Tiempo Reacci√≥n',icon:'‚ö°',grade:'3-5',gradeEs:'3-5',desc:'Faster reactions',descEs:'Reacciones r√°pidas',url:'games-35-reaction-time'},
{id:'typing-68',name:'Typing Quiz',nameEs:'Prueba Tecleo',icon:'‚å®Ô∏è',grade:'6-8',gradeEs:'6-8',desc:'Test typing',descEs:'Prueba tecleo',url:'games-68-typing-quiz'},
{id:'word-68',name:'Word Search Pro',nameEs:'Sopa Letras Pro',icon:'üîç',grade:'6-8',gradeEs:'6-8',desc:'Advanced search',descEs:'Sopa avanzada',url:'games-68-word-search'},
{id:'number-68',name:'Number Memory Pro',nameEs:'Memoria N√∫meros Pro',icon:'üßÆ',grade:'6-8',gradeEs:'6-8',desc:'Advanced numbers',descEs:'N√∫meros avanzados',url:'games-68-number-memory'},
{id:'visual-68',name:'Visual Memory Pro',nameEs:'Memoria Visual Pro',icon:'üëÅÔ∏è',grade:'6-8',gradeEs:'6-8',desc:'Expert memory',descEs:'Memoria experta',url:'games-68-visual-memory'},
{id:'sequence-68',name:'Sequence Pro',nameEs:'Secuencia Pro',icon:'üî≤',grade:'6-8',gradeEs:'6-8',desc:'Complex patterns',descEs:'Patrones complejos',url:'games-68-sequence-memory'},
{id:'reflex-68',name:'Reflex Pro',nameEs:'Reflejos Pro',icon:'üéØ',grade:'6-8',gradeEs:'6-8',desc:'Advanced reflexes',descEs:'Reflejos avanzados',url:'games-68-reflex-training'},
{id:'typing-912',name:'Speed Typing',nameEs:'Tecleo R√°pido',icon:'‚å®Ô∏è',grade:'9-12',gradeEs:'9-12',desc:'Fast typing',descEs:'Tecleo r√°pido',url:'games-912-typing'},
{id:'assessment-912',name:'Digital Assessment',nameEs:'Evaluaci√≥n Digital',icon:'üìù',grade:'9-12',gradeEs:'9-12',desc:'Full assessment',descEs:'Evaluaci√≥n completa',url:'games-912-assessment'},
{id:'stroop-912',name:'Stroop Challenge',nameEs:'Desaf√≠o Stroop',icon:'üß†',grade:'9-12',gradeEs:'9-12',desc:'Brain challenge',descEs:'Desaf√≠o cerebral',url:'games-912-stroop-challenge'},
{id:'number-912',name:'Number Memory Elite',nameEs:'Memoria N√∫meros Elite',icon:'üî¢',grade:'9-12',gradeEs:'9-12',desc:'Expert numbers',descEs:'N√∫meros experto',url:'games-912-number-memory'},
{id:'visual-912',name:'Visual Memory Elite',nameEs:'Memoria Visual Elite',icon:'üëÄ',grade:'9-12',gradeEs:'9-12',desc:'Master memory',descEs:'Memoria maestro',url:'games-912-visual-memory'},
{id:'word-912',name:'Word Search Elite',nameEs:'Sopa Letras Elite',icon:'üîç',grade:'9-12',gradeEs:'9-12',desc:'Expert search',descEs:'Sopa experta',url:'games-912-word-search'}
];

function setLang(lang){
document.body.className=lang;
document.getElementById('btnEn').classList.toggle('active',lang==='en');
document.getElementById('btnEs').classList.toggle('active',lang==='es');
localStorage.setItem('akashic_lang',lang);
if(document.getElementById('mainContent').style.display!=='none'){
renderGames();
}
}

async function init(){
const savedLang=localStorage.getItem('akashic_lang')||'en';
setLang(savedLang);
const studentId=localStorage.getItem('akashic_student_id');
const studentName=localStorage.getItem('akashic_student_name');
const classCode=localStorage.getItem('akashic_class_code');
console.log('üîç Student ID:',studentId);
console.log('üîç Student Name:',studentName);
console.log('üîç Class Code:',classCode);
if(!studentId||!studentName||!classCode){
console.error('‚ùå Missing data');
document.getElementById('loading').style.display='none';
document.getElementById('noAccess').style.display='block';
return;
}
try{
console.log('üîÑ Validating...');
const res=await fetch(`${API_URL}/classes/${classCode}/validate`);
const data=await res.json();
console.log('‚úÖ Validation:',data);
if(!data.valid)throw new Error('Invalid');
document.getElementById('studentName').textContent=`üë§ ${studentName}`;
renderGames();
document.getElementById('loading').style.display='none';
document.getElementById('mainContent').style.display='block';
console.log('‚úÖ Games loaded!');
}catch(err){
console.error('‚ùå Error:',err);
document.getElementById('loading').style.display='none';
document.getElementById('noAccess').style.display='block';
}
}

function renderGames(){
const grid=document.getElementById('gamesGrid');
const lang=localStorage.getItem('akashic_lang')||'en';
const isEs=lang==='es';
grid.innerHTML=GAMES.map(g=>`
<div class="game-card" onclick="playGame('${g.url}','${isEs?'es':'en'}')">
<div class="game-icon">${g.icon}</div>
<div class="game-name">${isEs?g.nameEs:g.name}</div>
<div class="game-grade">${isEs?g.gradeEs:g.grade}</div>
<div class="game-desc">${isEs?g.descEs:g.desc}</div>
<button class="btn-play">${isEs?'‚ñ∂Ô∏è Jugar':'‚ñ∂Ô∏è Play'}</button>
</div>
`).join('');
}

function playGame(url,lang){
const studentId=localStorage.getItem('akashic_student_id');
const classCode=localStorage.getItem('akashic_class_code');
window.location.href=`${url}-${lang}.html?studentId=${studentId}&classCode=${classCode}`;
}

function logout(){
const lang=localStorage.getItem('akashic_lang')||'en';
if(confirm(lang==='es'?'¬øCerrar sesi√≥n?':'Logout?')){
localStorage.removeItem('akashic_student_id');
localStorage.removeItem('akashic_student_name');
localStorage.removeItem('akashic_class_code');
window.location.href='student-setup.html';
}
}

window.addEventListener('DOMContentLoaded',init);
</script>
</body>
</html>
